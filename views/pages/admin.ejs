<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Admin View</title>
    <link rel="stylesheet" href="/stylesheets/admin.css">
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
  </head>
  <body>
    <h1 align="center">HOME PAGE</h1>

    <% if ( typeof message != 'undefined' && message.length > 0) { %>
    <p class="successMessage"><%= message %></p>
    <% } %>

    <h3 align="center"> ADMIN VIEW</h3>
    <table align="center" border=1>
			<p align="center">Hidden Traps User Accounts</p>
			<thead>
				<tr>
					<th>Username</th>
					<th>Email</th>
					<th>Type of User</th>
          <th></th>
				</tr>
			</thead>
			<tbody>
				<% rows.forEach((r) => { %>
				<tr>
          <form action="/removeUser/<%= r.userid %>" method="get" onsubmit="return confirmDelete(document.getElementById('<%= r.usertype %>').innerHTML, 
          document.getElementById('<%= r.username %>').innerHTML);">
						<td id="<%= r.username %>"><%= r.username %></td>
						<td id="<%= r.email %>"><%= r.email %></td>
						<td id="<%= r.usertype %>"><%= r.usertype %></td>
            <td><button type="submit" id="deleteUser">DELETE USER ACCOUNT!</button></td>
          </form>
          <script>
            function confirmDelete(usertype, username) {
              if (usertype.toString()=='Admin') {
                alert('Admins cannot be removed from users list!');
                return false;
               }
              else
                return confirm("Are you sure you want to remove " + username.toString() + " from users list?");
            }
          </script>
				</tr>
        <% }); %>
      </tbody>
    </table>
    <form class="" action="/pregame" method="post">
      <button type="submit" name="button">Start</button>
    </form>
    <form class="" action="/rules" method="post">
      <button type="submit" name="button">How to play</button>
    </form>
  </body>
</html>

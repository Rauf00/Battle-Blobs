<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
      <title>Battle Blobs</title>
      <link rel="stylesheet" href="/stylesheets/chat.css">
      <link rel="stylesheet" href="/stylesheets/game.css">
      <link href="https://fonts.googleapis.com/css?family=Sniglet:800&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Neucha&display=swap" rel="stylesheet">
      <link rel="icon" href="/assets/alienPink.png">
      <script src="js/getData.js" defer></script>
    </head>

    <body>
      <input type="text" id="nameGame" value="" hidden>
      <script src="/socket.io/socket.io.js"></script>

      <div align="right" id="logoutDiv">
          <form class="" action="/logout" method="post" onsubmit="return confirm('Are you sure you want to logout?')">
            <button type="submit" id="logout">Logout</button>
          </form>
      </div>

      <script src="//cdn.jsdelivr.net/npm/phaser@3.3.0/dist/phaser.min.js"></script>
      <script src="js/gameScript.js" defer></script>
      <script src="js/weatherConfig.js" defer></script>
      <!-- Include jquery, cookies, socket.io (client-side) and your own code -->
      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
      <script src="https://unpkg.com/cookie_js@1.2.2/cookie.min.js"></script>
      <script src="https://unpkg.com/socket.io-client@2/dist/socket.io.slim.js"></script>
      
      <h1 align="center">BATTLE BLOBS</h1>
      <p id="colour" hidden><%= character %></p>
      <!-- <p id = "usernameGame"></p> -->
      
      <div align="center" id="gameTimer"></div>
      <div class= "btn-group" id="toggles">
          <button id="toggleWeather" hidden>WEATHER ON</button>
          <button id="music">MUSIC OFF</button>
          <button id="sound">SOUND OFF</button>
      </div>
      <div id="phaser"></div>
      <div id="chatArea">
        <ul id="messages"></ul>
      </div>
      <form class = "chatForm">
          <input id = "messageText" type="text" placeholder="Say something nice" />
            <button type="submit" id="chatButton">Send</button>
      </form>



      <form class="" id="postGame" action="/postgame" method="post">
        <button type="submit" name="button" hidden>Go to postgame screen</button>
        <input id="trapTime" value="<%= trapTime %>" hidden>
        <input id="gameTime" value="<%= gameTime %>"hidden>
      </form>
      <script type="text/javascript">
        var trapSecs = document.getElementById('trapTime').value; 
        var gamePlaySecs = document.getElementById('gameTime').value;
        var timer;
        timer = setInterval(function() {
            var element = document.getElementById('gameTimer');
            element.innerHTML = "<h2>Set Traps! Time Remaining: <b>"+trapSecs+"</b></h2>";
            if(trapSecs < 1){
                clearInterval(timer);
                timer = setInterval(function() {
                  var element = document.getElementById('gameTimer');
                  element.innerHTML = "<h2>Game Time Remaining: <b>"+gamePlaySecs+"</b></h2>";
                  if (gamePlaySecs < 1){
                    clearInterval(timer);
                    document.getElementById('postGame').submit();
                  }
                  gamePlaySecs--;
              }, 1000);
            }
            trapSecs--;
          }, 1000)
      </script>

    </body>
</html>